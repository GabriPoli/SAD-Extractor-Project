<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8">
        <title>SAD-Extractor | Histórico de Laudos</title>
        <link rel="stylesheet" href="TelaHistoricoLaudos.css">
    </head>
    <body>

        <nav class="navbar">
            <div class="navbar-left">
                <span class="logo-text">SAD Extractor</span>
                <span class="subtitle-text">Sistema de Extração de dados imobiliários</span>
            </div>
            <div class="navbar-right">
                <img src="/images/logoSADGovPE.png" alt="Secretaria de Administração" class="sad-logo">
            </div>
        </nav>
    
        <div class="main-menu">
            <a href="#" class="menu-item">Upload de documentos</a>
            <a href="#" class="menu-item">Editar dados</a>
            <a href="#" class="menu-item active">Histórico de Laudos</a>
            <a href="#" class="menu-item">Histórico de usuários</a>
            <a href="#" class="menu-item">Indicadores</a>
            <div class="user-info">
                <span>Olá, Nome do usuário</span>
                <div class="avatar">TT</div>
            </div>
        </div>

        <div class="history-section"> 
        
        <!-- 1. CARD DE TÍTULO -->
        <div class="page-header-card">
            <h2>Histórico dos Laudos</h2>
            <p class="subtitle">Visualização dos dados de todos os laudos que foram extraídos ao longo do tempo.</p>
        </div>

        <!-- 2. FORMULÁRIO DE PESQUISA -->
        <div class="search-card">
            <form class="search-form">
                <div class="form-group">
                    <label>N° do documento</label>
                    <input type="text" class="form-control" placeholder="Pesquisar">
                </div>
                <div class="form-group">
                    <label>Endereço</label>
                    <input type="text" class="form-control" placeholder="Pesquisar">
                </div>
                <div class="form-group">
                    <label>Coordenadas</label>
                    <input type="text" class="form-control" placeholder="Pesquisar">
                </div>
                <div class="form-group">
                    <label>Data da Extração</label>
                    <input type="date" class="form-control">
                </div>
                <div class="form-group form-action">
                    <button type="button" class="btn-primary btn-full">Pesquisar</button>
                </div>
            </form>
        </div>

        <!-- 3. TABELA DE RESULTADOS -->
        <main class="card" id="visualizer">
            <header class="card-header">
                <h3>Tabela padrão</h3>
            </header>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th></th>
                            <th>N° do documento</th>
                            <th>Endereço</th>
                            <th>Coordenadas geográficas (S)</th>
                            <th>Coordenadas geográficas (W)</th>
                            <th>Estado de Conservação.</th>
                            <th>Valor Imóvel</th>
                            <th>Data Extração</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <!-- JS preenche aqui -->
                    </tbody>
                </table>
            </div>

            <!-- RODAPÉ DO CARD (Ações + Paginação) -->
            <footer class="card-footer">
                <!-- Lado Esquerdo: Ações -->
                <div class="footer-actions">
                    <button type="button" class="btn-link" id="select-all-text">Selecionar tudo</button>
                    <button type="button" class="btn-link" id="deselect-all-text">Excluir tudo</button>
                </div>
                
                <!-- Lado Direito: O JS vai criar a paginação AQUI dentro -->
                <!-- IMPORTANTE: Este ID é usado pelo historico.js -->
                <div id="pagination-wrapper" class="pagination-wrapper"></div>
            </footer>
            <div class="footer-bar">
                <span id="selected-count-balloon">Nenhum laudo selecionado</span>
                <div class="export-container">
                    <span class="export-label">Opções para exportação:</span>
                    
                    <div class="export-buttons-column">
                        <div class="export-buttons-wrapper">
                            <div class="dropdown">
                                <button class="btn-outline dropdown-toggle" id="dropdown-btn">
                                    <span id="selected-format-text">Selecionar formato</span> <span class="caret">▼</span>
                                </button>
                                <ul class="dropdown-menu" id="dropdown-menu">
                                    <li><a href="#" data-value=".pdf">.PDF (Relatório)</a></li>
                                    <li><a href="#" data-value=".xlsx">.XLSX (Excel)</a></li>
                                </ul>
                            </div>
                            <button id="btn-download" class="btn-primary" disabled>Baixar laudos</button>
                        </div>
                        <!-- Container fixo para a mensagem -->
                        <div class="message-placeholder">
                            <div id="download-success-msg" class="download-success hidden"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        

    <!-- TEMPLATES (Modais) -->
        <template id="template-modal-confirmacao">
            <div id="confirmation-modal" class="modal-overlay hidden">
                <div class="modal-content modal-delete">
                    <header class="modal-header-delete">
                        <h2 class="modal-title-header">Confirmar Ação</h2>
                        <button id="modal-close-btn" class="modal-close-simple">&times;</button>
                    </header>
                    <div class="modal-body-delete">
                        <div class="delete-icon-wrapper">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                            </svg>
                        </div>
                        <h3 class="modal-subtitle-delete">Você tem certeza?</h3>
                        <p id="confirmation-text">Essa ação não poderá ser desfeita. Isso excluirá permanentemente os dados do sistema.</p>
                    </div>
                    <footer class="modal-footer-delete">
                        <button id="btn-cancel-delete" class="btn-secondary">Cancelar</button>
                        <button id="btn-confirm-delete" class="btn-danger">Sim, excluir</button>
                    </footer>
                </div>
            </div>
        </template>

        <template id="template-modal-detalhes">
            <div id="details-modal" class="modal-overlay hidden">
                <div class="modal-content-details">
                    <header class="modal-header-details">
                        <h2 id="details-title"></h2>
                        <button id="details-close-btn" class="btn-primary">Voltar</button>
                    </header>
                    <p class="subtitle-details">Informações completas extraídas do documento</p>
                
                    <div id="details-modal-body" class="modal-body-details">
                    
                        <!-- Seção 1: Localização -->
                        <h3>Dados sobre Localização do Imóvel</h3>
                        <div class="detail-grid">
                            <div class="detail-item"><label>Endereço</label><span id="detail-loc_endereco"></span></div>
                            <div class="detail-item"><label>Número</label><span id="detail-loc_numero"></span></div>
                            <div class="detail-item"><label>Complemento</label><span id="detail-loc_complemento"></span></div>
                            <div class="detail-item"><label>Bairro</label><span id="detail-loc_bairro"></span></div>
                            <div class="detail-item"><label>CEP</label><span id="detail-loc_cep"></span></div>
                            <div class="detail-item"><label>País</label><span id="detail-loc_pais"></span></div>
                            <div class="detail-item"><label>Estado (UF)</label><span id="detail-loc_estado"></span></div>
                            <div class="detail-item"><label>Cidade/Município</label><span id="detail-loc_cidade"></span></div>
                            <div class="detail-item"><label>Região</label><span id="detail-loc_regiao"></span></div>
                            <div class="detail-item"><label>Confrontante frente</label><span id="detail-loc_confFrente"></span></div>
                            <div class="detail-item"><label>Confrontante fundo</label><span id="detail-loc_confFundo"></span></div>
                            <div class="detail-item"><label>Confrontante direita</label><span id="detail-loc_confDireita"></span></div>
                            <div class="detail-item"><label>Confrontante esquerda</label><span id="detail-loc_confEsquerda"></span></div>
                            <div class="detail-item"><label>Ponto de referência</label><span id="detail-loc_pontoRef"></span></div>
                            <div class="detail-item"><label>Coordenada geográfica (S)</label><span id="detail-loc_coordS"></span></div>
                            <div class="detail-item"><label>Coordenada geográfica Geo (W)</label><span id="detail-loc_coordW"></span></div>
                        </div>

                        <!-- Seção 2: Características -->
                        <h3>Características do Imóvel</h3>
                        <div class="detail-grid">
                            <div class="detail-item"><label>Área do terreno</label><span id="detail-carac_areaTerreno"></span></div>
                            <div class="detail-item"><label>Área construída</label><span id="detail-carac_areaConstruida"></span></div>
                            <div class="detail-item"><label>Unidade medida</label><span id="detail-carac_unidadeMedida"></span></div>
                            <div class="detail-item"><label>Estado conservação</label><span id="detail-carac_estadoConserv"></span></div>
                            <div class="detail-item"><label>Limitação administrativa</label><span id="detail-carac_limitAdmin"></span></div>
                        </div>

                        <!-- Seção 3: Financeiro -->
                        <h3>Dados Financeiros</h3>
                        <div class="detail-grid">
                            <div class="detail-item"><label>Critério valoração</label><span id="detail-fin_critVal"></span></div>
                            <div class="detail-item"><label>Data valoração</label><span id="detail-fin_dataVal"></span></div>
                            <div class="detail-item"><label>Nº do documento</label><span id="detail-fin_numDoc"></span></div>
                            <div class="detail-item"><label>Valor const. nova</label><span id="detail-fin_valConstNova"></span></div>
                            <div class="detail-item"><label>Valor área const.</label><span id="detail-fin_valAreaConst"></span></div>
                            <div class="detail-item"><label>Valor terreno</label><span id="detail-fin_valTerreno"></span></div>
                            <div class="detail-item"><label>Valor total</label><span id="detail-fin_valTotal"></span></div>
                            <div class="detail-item full-width"><label>Observação</label><span id="detail-fin_obs"></span></div>
                        </div>
                    </div>
                    <footer class="modal-footer-details">
                        <span class="edit-status-legend">*Dados editados pelo usuário</span>
                    </footer>
                </div>
            </div>
        </template>

        <script src="TelaHistoricoLaudos.js"></script>
    </body>
</html>